<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-08-05 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160805" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Kafka End2End encryption &#x2013; Kafka End2End encryption</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

          
                      </head>
        <body class="topBarEnabled">
          
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                                                                <a class="brand" href="index.html"  title="Kafka End2End encryption">

                                
                                    Kafka End2End encryption
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Home">Home</a>
</li>
                  
                      <li>      <a href="apidocs/index.html"  title="Javadoc">Javadoc</a>
</li>
                  
                      <li>      <a href="source-repository.html"  title="Source Code">Source Code</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="distribution-management.html"  title="Distribution Management">Distribution Management</a>
</li>
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Management">Issue Management</a>
</li>
                                  <li>      <a href="plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="plugins.html"  title="Plugins">Plugins</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Code Management">Source Code Management</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Summary">Summary</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="findbugs.html"  title="FindBugs">FindBugs</a>
</li>
                                  <li>      <a href="pmd.html"  title="PMD">PMD</a>
</li>
                                  <li>      <a href="apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="testapidocs/index.html"  title="Test JavaDocs">Test JavaDocs</a>
</li>
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="index.html" id="bannerLeft" title="Kafka End2End encryption">
                <h2>Kafka End2End encryption</h2>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-08-05
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.0-SNAPSHOT
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">User Guide</li>
                              
      <li class="active">
  
            <a href="#"><span class="none"></span>Home</a>
          </li>
                
      <li>
  
                          <a href="apidocs/index.html" title="Javadoc">
          <span class="none"></span>
        Javadoc</a>
            </li>
                
      <li>
  
                          <a href="source-repository.html" title="Source Code">
          <span class="none"></span>
        Source Code</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                          
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-down"></span>
        Project Information</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="dependencies.html" title="Dependencies">
          <span class="none"></span>
        Dependencies</a>
            </li>
                    
      <li>
  
                          <a href="dependency-info.html" title="Dependency Information">
          <span class="none"></span>
        Dependency Information</a>
            </li>
                    
      <li>
  
                          <a href="distribution-management.html" title="Distribution Management">
          <span class="none"></span>
        Distribution Management</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>About</a>
          </li>
                    
      <li>
  
                          <a href="issue-tracking.html" title="Issue Management">
          <span class="none"></span>
        Issue Management</a>
            </li>
                    
      <li>
  
                          <a href="plugin-management.html" title="Plugin Management">
          <span class="none"></span>
        Plugin Management</a>
            </li>
                    
      <li>
  
                          <a href="plugins.html" title="Plugins">
          <span class="none"></span>
        Plugins</a>
            </li>
                    
      <li>
  
                          <a href="source-repository.html" title="Source Code Management">
          <span class="none"></span>
        Source Code Management</a>
            </li>
                    
      <li>
  
                          <a href="project-summary.html" title="Summary">
          <span class="none"></span>
        Summary</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                              
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Kafka End2End encryption</h1>
<p>A small library with no external dependencies which provide transparent AES end-to-end encryption for Apache Kafka.</p>
<div class="section">
<h2><a name="Prerequisites"></a>Prerequisites</h2>

<ul>
  
<li>Kafka client 0.8.2.0 or higher</li>
  
<li>Java 6 or higher</li>
  
<li>For AES 256 en-/decryption you have to install <a class="externalLink" href="http://www.oracle.com/technetwork/java/javase/overview/index.html">JCE Unlimited Strength Jurisdiction Policy Files</a></li>
</ul></div>
<div class="section">
<h2><a name="Features"></a>Features</h2>

<ul>
  
<li>Transparent encryption, will be configured as serializer/deserializer</li>
  
<li>End-to-end encryption of Kafka messages with random AES key(s)</li>
  
<li>AES key is attached in RSA encrypted form to every message</li>
  
<li>Consumer detects if a message is encrypted and can therefore handle also unencrypted messages</li>
  
<li>No external dependencies</li>
  
<li>On modern hardware with recent Java installed AES will be computed directly on the CPU (via AES-NI)</li>
</ul></div>
<div class="section">
<h2><a name="Get_it"></a>Get it</h2>
<div class="section">
<h3><a name="via_Maven"></a>via Maven</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;groupId&gt;de.saly&lt;/groupId&gt;
&lt;artifactId&gt;kafka-end-2-end-encryption&lt;/artifactId&gt;
&lt;version&gt;1.0.0&lt;/version&gt;
</pre></div></div></div>
<div class="section">
<h3><a name="or_download_.jar_file"></a>or download .jar file</h3>
<p><a class="externalLink" href="http://search.maven.org/#search%7Cga%7C1%7Ckafka-end-2-end-encryption">Here</a></p></div>
<div class="section">
<h3><a name="or_build_it_yourself"></a>or build it yourself</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">mvn package
</pre></div></div>
<p>Include the library in the classpath of the producer or consumer.</p></div></div>
<div class="section">
<h2><a name="Configuration"></a>Configuration</h2>
<p>This library provide a serializer and a deserializer which handles the encryption/decryption stuff and delegate the message then to an underlying serializer/deserializer. In other words: Your original serializer/deserializer will be wrapped with that one.</p>
<div class="section">
<h3><a name="Producer"></a>Producer</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">crypto.wrapped_serializer: &lt;wrapped serializer&gt; #mandatory
crypto.rsa.publickey.filepath: &lt;path&gt; #mandatory
crypto.aes.key_len: 128 #optional
crypto.hash_method: SHA-256 #optional
</pre></div></div></div>
<div class="section">
<h3><a name="Consumer"></a>Consumer</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">crypto.wrapped_deserializer: &lt;wrapped deserializer&gt; #mandatory
crypto.rsa.privatekey.filepath: &lt;path&gt; #mandatory
#If set to true then the original message will be returned on decrypt failure
#If set to false (the default) an exception will be thrown on decrypt failure
crypto.ignore_decrypt_failures: false #optional
</pre></div></div></div></div>
<div class="section">
<h2><a name="Create_a_RSA_key_pair"></a>Create a RSA key pair</h2>

<div class="source">
<div class="source"><pre class="prettyprint linenums">java -cp kafka-end-2-end-encryption-1.0.0.jar de.saly.kafka.crypto.RsaKeyGen 2048
</pre></div></div>
<p>This creates a 2048-bit RSA key pair. The publickey is used on the consumer side to encrypt the AES key attached to every message. The privatekey is used on the consumer side to decrypt the AES key.</p></div>
<div class="section">
<h2><a name="Example"></a>Example</h2>
<div class="section">
<h3><a name="Producer"></a>Producer</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">value.serializer: de.saly.kafka.crypto.EncryptingSerializer
crypto.wrapped_serializer: org.apache.kafka.common.serialization.StringSerializer
crypto.rsa.publickey.filepath: /opt/rsa_publickey_2048_db484e3c-c3f5-4197-bb40-2f60c498b157
</pre></div></div></div>
<div class="section">
<h3><a name="Consumer"></a>Consumer</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">value.deserializer: de.saly.kafka.crypto.DecryptingDeserializer
crypto.wrapped_deserializer: org.apache.kafka.common.serialization.StringDeserializer
crypto.rsa.privatekey.filepath: /opt/rsa_privatekey_2048_db484e3c-c3f5-4197-bb40-2f60c498b157
</pre></div></div>
<p>If you want also encrypt the key of the message use &#x201c;key.serializer&#x201d; and &#x201c;key.deserializer&#x201d; the same way.</p></div></div>
<div class="section">
<h2><a name="Limitations"></a>Limitations</h2>
<p>Currently value and key wrapped serializer cannot be different.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                          
                </div>

        
                </div>
    </footer>
        </body>
</html>
